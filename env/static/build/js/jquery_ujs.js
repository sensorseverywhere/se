!function(t,e){var a;t.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",selectChangeSelector:"select[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",CSRFProtection:function(e){var a=t('meta[name="csrf-token"]').attr("content");a&&e.setRequestHeader("X-CSRF-Token",a)},fire:function(e,a,n){var i=t.Event(a);return e.trigger(i,n),i.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},handleRemote:function(n){var i,r,o,l=n.data("cross-domain")||null,s=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType;if(a.fire(n,"ajax:before")){if(n.is("form")){i=n.attr("method"),r=n.attr("action"),o=n.serializeArray();var u=n.data("ujs:submit-button");u&&(o.push(u),n.data("ujs:submit-button",null))}else n.is("select")?(i=n.data("method"),r=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),r=n.attr("href"),o=n.data("params")||null);options={type:i||"GET",data:o,dataType:s,crossDomain:l,beforeSend:function(t,i){return i.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),a.fire(n,"ajax:beforeSend",[t,i])},success:function(t,e,a){n.trigger("ajax:success",[t,e,a])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,a){n.trigger("ajax:error",[t,e,a])}},r&&t.extend(options,{url:r}),a.ajax(options)}},handleMethod:function(a){var n=a.attr("href"),i=a.data("method"),r=t("meta[name=csrf-token]").attr("content"),o=t("meta[name=csrf-param]").attr("content"),l=t('<form method="post" action="'+n+'"></form>'),s='<input name="_method" value="'+i+'" type="hidden" />';o!==e&&r!==e&&(s+='<input name="'+o+'" value="'+r+'" type="hidden" />'),l.hide().append(s).appendTo("body"),l.submit()},disableFormElements:function(e){e.find(a.disableSelector).each(function(){var e=t(this),a=e.is("button")?"html":"val";e.data("ujs:enable-with",e[a]()),e[a](e.data("disable-with")),e.attr("disabled","disabled")})},enableFormElements:function(e){e.find(a.enableSelector).each(function(){var e=t(this),a=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[a](e.data("ujs:enable-with")),e.removeAttr("disabled")})},allowAction:function(t){var e,n=t.data("confirm"),i=!1;return!n||(a.fire(t,"confirm")&&(i=a.confirm(n),e=a.fire(t,"confirm:complete",[i])),i&&e)},blankInputs:function(e,a,n){var i,r=t(),o=a||"input,textarea";return e.find(o).each(function(){i=t(this),(n?i.val():!i.val())&&(r=r.add(i))}),!!r.length&&r},nonBlankInputs:function(t,e){return a.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(a){var n=a.data("events"),i=!0;return n!==e&&n.submit!==e&&t.each(n.submit,function(t,e){if("function"==typeof e.handler)return i=e.handler(e.data)}),i}},t.ajaxPrefilter(function(t,e,n){t.crossDomain||a.CSRFProtection(n)}),t(a.linkClickSelector).live("click.rails",function(n){var i=t(this);return a.allowAction(i)?i.data("remote")!==e?(a.handleRemote(i),!1):i.data("method")?(a.handleMethod(i),!1):void 0:a.stopEverything(n)}),t(a.selectChangeSelector).live("change.rails",function(e){var n=t(this);return a.allowAction(n)?(a.handleRemote(n),!1):a.stopEverything(e)}),t(a.formSubmitSelector).live("submit.rails",function(n){var i=t(this),r=i.data("remote")!==e,o=a.blankInputs(i,a.requiredInputSelector),l=a.nonBlankInputs(i,a.fileInputSelector);return a.allowAction(i)?o&&i.attr("novalidate")==e&&a.fire(i,"ajax:aborted:required",[o])?a.stopEverything(n):r?l?a.fire(i,"ajax:aborted:file",[l]):t.support.submitBubbles||a.callFormSubmitBindings(i)!==!1?(a.handleRemote(i),!1):a.stopEverything(n):void setTimeout(function(){a.disableFormElements(i)},13):a.stopEverything(n)}),t(a.formInputClickSelector).live("click.rails",function(e){var n=t(this);if(!a.allowAction(n))return a.stopEverything(e);var i=n.attr("name"),r=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),t(a.formSubmitSelector).live("ajax:beforeSend.rails",function(e){this==e.target&&a.disableFormElements(t(this))}),t(a.formSubmitSelector).live("ajax:complete.rails",function(e){this==e.target&&a.enableFormElements(t(this))})}(jQuery);